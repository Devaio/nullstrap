// Generated by CoffeeScript 1.6.2
(function() {
  var app, express, hbsPrecompiler, io, port, server;

  express = require('express');

  app = express();

  server = require('http').createServer(app);

  io = require('socket.io').listen(server);

  hbsPrecompiler = require('handlebars-precompiler');

  app.configure(function() {
    app.set('views', __dirname + '/../views');
    app.set('view engine', 'jade');
    app.set('view options', {
      layout: false
    });
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use('/public', express["static"](__dirname + '/../public'));
    app.use('/components', express["static"](__dirname + '/../components'));
    if (!process.env.NODE_ENV) {
      return hbsPrecompiler.watchDir(__dirname + "/../public/templates/src", __dirname + "/../public/templates/templates.js", ['handlebars']);
    }
  });

  app.get('/', function(req, res) {
    return res.render('index');
  });

  io.sockets.on('connection', function(socket) {
    return socket.emit('hello', {
      data: 'Hi!'
    });
  });

  port = process.env.PORT || 3000;

  server.listen(port, function() {
    return console.log("Server running on port " + port);
  });

}).call(this);
